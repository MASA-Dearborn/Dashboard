<!DOCTYPE html>
<html>
    <head>
        <title>MASA Dashboard</title>
        <link rel="shortcut icon" href="#" />
        <style>
            * {
                font-size: 10px;
            }
            #map {
                width: 180px;
            }
        </style>

        <!-- Various includes for map, plotting, and jqeury packages -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
        
        <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    </head>
    <body>
        <input id="name-input" type="text"/>
        <p id="main-text"></p>

        <div id="map"></div>

        <script>
            var map = L.map("map").setView([51.505, -0.09], 13); // Create a map
            
            // Set an interval to send a jquery post request every so often
            var timerId = setInterval(function(event) {
                let message = {
                    name: $("#name-input").val()
                }
                $.post("http://127.0.0.1:5000/fetch", JSON.stringify(message), function(response) {
                    //$("#greeting").text(response.greeting);
                    document.getElementById("main-text").textContent += response.data + "\n";
                    console.log(response);
                })
            }, 1000);
        </script>
    </body>
</html>
